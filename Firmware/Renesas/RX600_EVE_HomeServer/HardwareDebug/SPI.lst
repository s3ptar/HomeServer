   1                             		.file	"SPI.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.section	.text.S_UART_SPI,"ax",@progbits
   5                             		.global	_S_UART_SPI
   7                             	_S_UART_SPI:
   8                             	.LFB0:
   9                             		.file 1 "../src/SPI.c"
   1:../src/SPI.c  **** /***********************************************************************/
   2:../src/SPI.c  **** /*                                                                     */
   3:../src/SPI.c  **** /*  FILE        :SPI.c                                                 */
   4:../src/SPI.c  **** /*  DATE        :Tue, Aug. 23, 2013                                    */
   5:../src/SPI.c  **** /*  DESCRIPTION :SPI Functions                                         */
   6:../src/SPI.c  **** /*  CPU TYPE    :RX63N                                                 */
   7:../src/SPI.c  **** /*                                                                     */
   8:../src/SPI.c  **** /*  This file is generated by M. Reinschmidt - GLYN                    */
   9:../src/SPI.c  **** /*  NOTE:                                                              */
  10:../src/SPI.c  **** /*                                                                     */
  11:../src/SPI.c  **** /***********************************************************************/
  12:../src/SPI.c  **** #include "iodefine.h"                  
  13:../src/SPI.c  **** #include "spi.h"
  14:../src/SPI.c  **** 
  15:../src/SPI.c  **** 
  16:../src/SPI.c  **** void S_UART_SPI(void)
  17:../src/SPI.c  **** {
  10                             		.loc 1 17 0
  11 0000 7E A6                   		push.l	r6
  12                             	.LCFI0:
  13 0002 EF 06                   		mov.L	r0, r6
  14                             	.LCFI1:
  18:../src/SPI.c  **** 	SYSTEM.PRCR.WORD=0xA503u;
  15                             		.loc 1 18 0
  16 0004 FB 5E 00 00 08          		mov.L	#0x80000, r5
  17 0009 FA 59 FF 01 03 A5       		mov.W	#0xffffa503, 1022[r5]
  19:../src/SPI.c  **** 	MSTP(SCI3)=0;
  18                             		.loc 1 19 0
  19 000f FB 5E 00 00 08          		mov.L	#0x80000, r5
  20 0014 A9 5C                   		mov.L	20[r5], r4
  21 0016 74 24 FF FF FF EF       		and	#0xefffffff, r4
  22 001c A1 5C                   		mov.L	r4, 20[r5]
  20:../src/SPI.c  **** 	MPC.PWPR.BYTE=0x00;
  23                             		.loc 1 20 0
  24 001e FB 5E 00 C1 08          		mov.L	#0x8c100, r5
  25 0023 3C DF 00                		mov.B	#0, 31[r5]
  21:../src/SPI.c  **** 	MPC.PWPR.BYTE=0x40;
  26                             		.loc 1 21 0
  27 0026 FB 5E 00 C1 08          		mov.L	#0x8c100, r5
  28 002b 3C DF 40                		mov.B	#64, 31[r5]
  22:../src/SPI.c  **** 	
  23:../src/SPI.c  ****   	MPC.P25PFS.BIT.PSEL = 0xA;  /* configrure for SRSPI */
  29                             		.loc 1 23 0
  30 002e FB 5E 00 C1 08          		mov.L	#0x8c100, r5
  31 0033 CD 54 55                		mov.B	85[r5], r4
  32 0036 75 24 E0                		and	#-32, r4
  33 0039 65 A4                   		or	#10, r4
  34 003b C7 54 55                		mov.B	r4, 85[r5]
  24:../src/SPI.c  ****   	MPC.P23PFS.BIT.PSEL = 0xA;  /* configrure for SRSPI */
  35                             		.loc 1 24 0
  36 003e FB 5E 00 C1 08          		mov.L	#0x8c100, r5
  37 0043 CD 54 53                		mov.B	83[r5], r4
  38 0046 75 24 E0                		and	#-32, r4
  39 0049 65 A4                   		or	#10, r4
  40 004b C7 54 53                		mov.B	r4, 83[r5]
  25:../src/SPI.c  ****  	MPC.P24PFS.BIT.PSEL = 0xA;  /* configrure for SRSPI */
  41                             		.loc 1 25 0
  42 004e FB 5E 00 C1 08          		mov.L	#0x8c100, r5
  43 0053 CD 54 54                		mov.B	84[r5], r4
  44 0056 75 24 E0                		and	#-32, r4
  45 0059 65 A4                   		or	#10, r4
  46 005b C7 54 54                		mov.B	r4, 84[r5]
  26:../src/SPI.c  **** 
  27:../src/SPI.c  ****   	PORT2.PMR.BYTE = 0x38 ;      /* Enable peripheral */
  47                             		.loc 1 27 0
  48 005e FB 5E 02 C0 08          		mov.L	#0x8c002, r5
  49 0063 F9 54 60 38             		mov.B	#56, 96[r5]
  28:../src/SPI.c  **** 
  29:../src/SPI.c  **** 
  30:../src/SPI.c  ****   	SCI3.SMR.BYTE=0x80;
  50                             		.loc 1 30 0
  51 0067 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  52 006c F8 54 80                		mov.B	#0xffffff80, [r5]
  31:../src/SPI.c  ****   	SCI3.SSR.BYTE=0x84;
  53                             		.loc 1 31 0
  54 006f FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  55 0074 F9 54 04 84             		mov.B	#0xffffff84, 4[r5]
  32:../src/SPI.c  ****   	SCI3.SCMR.BYTE=0x7A; //MSB first //0x72 LSB First
  56                             		.loc 1 32 0
  57 0078 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  58 007d 3C 56 7A                		mov.B	#0x7a, 6[r5]
  33:../src/SPI.c  ****   	SCI3.BRR=0x00;
  59                             		.loc 1 33 0
  60 0080 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  61 0085 3C 51 00                		mov.B	#0, 1[r5]
  34:../src/SPI.c  ****   // 	SCI3.BRR=0x05;
  35:../src/SPI.c  ****  	SCI3.SCR.BYTE=0x00;
  62                             		.loc 1 35 0
  63 0088 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  64 008d 3C 52 00                		mov.B	#0, 2[r5]
  36:../src/SPI.c  **** 
  37:../src/SPI.c  ****   	SCI3.SPMR.BYTE=0x00; // SSE Pin disabled in single-master system
  65                             		.loc 1 37 0
  66 0090 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  67 0095 3C 5D 00                		mov.B	#0, 13[r5]
  38:../src/SPI.c  ****  // 	SCI3.SPMR.BYTE=0x40; // SSE Pin disabled in single-master system // CLOCKPOL invert
  39:../src/SPI.c  ****   	SCI3.SPMR.BYTE=0x80; // SSE Pin disabled in single-master system // CLOCKPHASE
  68                             		.loc 1 39 0
  69 0098 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  70 009d F9 54 0D 80             		mov.B	#0xffffff80, 13[r5]
  40:../src/SPI.c  **** 
  41:../src/SPI.c  **** //	SCI3.SCR.BYTE=0x20;		// enable transmit
  42:../src/SPI.c  **** //	SCI3.SCR.BYTE=0x10;		// enable receive
  43:../src/SPI.c  **** 	SCI3.SCR.BYTE=0x30;		// enable receive und transmit
  71                             		.loc 1 43 0
  72 00a1 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  73 00a6 3C 52 30                		mov.B	#48, 2[r5]
  44:../src/SPI.c  **** }
  74                             		.loc 1 44 0
  75 00a9 3F 66 01                		rtsd	#4, r6-r6
  76                             	.LFE0:
  78                             		.section	.text.send_SPI,"ax",@progbits
  79                             		.global	_send_SPI
  81                             	_send_SPI:
  82                             	.LFB1:
  45:../src/SPI.c  **** 
  46:../src/SPI.c  **** void send_SPI(unsigned char data)
  47:../src/SPI.c  **** {
  83                             		.loc 1 47 0
  84 0000 7E A6                   		push.l	r6
  85                             	.LCFI2:
  86 0002 71 06 FC                		add	#-4, r0, r6
  87                             	.LCFI3:
  88 0005 EF 60                   		mov.L	r6, r0
  89                             	.LCFI4:
  90 0007 C3 61                   		mov.B	r1, [r6]
  48:../src/SPI.c  **** //M	SCI3.SCR.BYTE=0x20;		// enable transmit
  49:../src/SPI.c  **** 	SCI3.TDR=data;
  91                             		.loc 1 49 0
  92 0009 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
  93 000e CC 64                   		mov.B	[r6], r4
  94 0010 80 DC                   		mov.B	r4, 3[r5]
  50:../src/SPI.c  **** 	while(SCI3.SSR.BIT.TEND==0);	
  95                             		.loc 1 50 0
  96 0012 03                      		nop
  97                             	.L3:
  98                             		.loc 1 50 0 is_stmt 0 discriminator 1
  99 0013 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
 100 0018 89 55                   		mov.B	4[r5], r5
 101 001a 5B 55                   		movu.B	r5, r5
 102 001c 68 25                   		shlr	#2, r5
 103 001e 64 15                   		and	#1, r5
 104 0020 5B 55                   		movu.B	r5, r5
 105 0022 61 05                   		cmp	#0, r5
 106 0024 20 EF                   		beq	.L3
  51:../src/SPI.c  **** //M	SCI3.SCR.BYTE=0x00;		// disable transmit
  52:../src/SPI.c  **** //	SCI3.SCR.BYTE=0x10;		// enable receive
  53:../src/SPI.c  **** }
 107                             		.loc 1 53 0 is_stmt 1
 108 0026 3F 66 02                		rtsd	#8, r6-r6
 109                             	.LFE1:
 111                             		.section	.text.read_SPI,"ax",@progbits
 112                             		.global	_read_SPI
 114                             	_read_SPI:
 115                             	.LFB2:
  54:../src/SPI.c  **** 
  55:../src/SPI.c  **** unsigned char read_SPI(void)
  56:../src/SPI.c  **** {
 116                             		.loc 1 56 0
 117 0000 7E A6                   		push.l	r6
 118                             	.LCFI5:
 119 0002 71 06 FC                		add	#-4, r0, r6
 120                             	.LCFI6:
 121 0005 EF 60                   		mov.L	r6, r0
 122                             	.LCFI7:
  57:../src/SPI.c  **** 	unsigned char receive;
  58:../src/SPI.c  **** 	
  59:../src/SPI.c  **** //M	SCI3.SCR.BYTE=0x30;		// enable receive
  60:../src/SPI.c  **** 	receive=SCI3.RDR;
 123                             		.loc 1 60 0
 124 0007 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
 125 000c 89 5D                   		mov.B	5[r5], r5
 126 000e C3 65                   		mov.B	r5, [r6]
  61:../src/SPI.c  **** //M	SCI3.SCR.BYTE=0x00;		// disable transmit
  62:../src/SPI.c  **** 
  63:../src/SPI.c  **** return receive;
 127                             		.loc 1 63 0
 128 0010 CC 65                   		mov.B	[r6], r5
 129 0012 5B 55                   		movu.B	r5, r5
  64:../src/SPI.c  **** }
 130                             		.loc 1 64 0
 131 0014 EF 51                   		mov.L	r5, r1
 132 0016 3F 66 02                		rtsd	#8, r6-r6
 133                             	.LFE2:
 135                             		.section	.text.USART_StatusGet,"ax",@progbits
 136                             		.global	_USART_StatusGet
 138                             	_USART_StatusGet:
 139                             	.LFB3:
  65:../src/SPI.c  **** 
  66:../src/SPI.c  **** unsigned char USART_StatusGet(void)
  67:../src/SPI.c  **** {
 140                             		.loc 1 67 0
 141 0000 7E A6                   		push.l	r6
 142                             	.LCFI8:
 143 0002 EF 06                   		mov.L	r0, r6
 144                             	.LCFI9:
  68:../src/SPI.c  **** 	return SCI3.SSR.BIT.TEND;
 145                             		.loc 1 68 0
 146 0004 FB 5E 60 A0 08          		mov.L	#0x8a060, r5
 147 0009 89 55                   		mov.B	4[r5], r5
 148 000b 5B 55                   		movu.B	r5, r5
 149 000d 68 25                   		shlr	#2, r5
 150 000f 64 15                   		and	#1, r5
 151 0011 5B 55                   		movu.B	r5, r5
  69:../src/SPI.c  **** }...
 152                             		.loc 1 69 0
 153 0013 EF 51                   		mov.L	r5, r1
 154 0015 3F 66 01                		rtsd	#4, r6-r6
 155                             	.LFE3:
 257                             	.Letext0:
 258                             		.file 2 "C:/projekte/repo/HomeServer/Firmware/Renesas/RX600_EVE_HomeServer/generate/iodefine.h"
